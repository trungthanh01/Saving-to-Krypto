<?xml version="1.0" encoding="UTF-8"?>
<project>
  <info>
    <name>Crypto Portfolio Integration</name>
    <description>Tích hợp tính năng quản lý danh mục đầu tư crypto vào ứng dụng Saving</description>
    <tech_stack>React, Context API, CoinGecko API, Recharts</tech_stack>
    <estimated_time>4-6 weeks</estimated_time>
  </info>

  <!-- PHASE 1: SETUP & PLANNING -->
  <phase id="1" name="Setup & Planning" duration="2-3 days">
    <task id="1.1" priority="high" difficulty="easy">
      <title>Phân tích và thiết kế Database Schema</title>
      <description>Thiết kế cấu trúc data cho portfolio</description>
      <subtasks>
        <subtask>Xác định data structure cho holdings (coin, amount, buyPrice, date)</subtask>
        <subtask>Thiết kế transaction history schema</subtask>
        <subtask>Plan cho Local Storage hoặc backend integration</subtask>
      </subtasks>
      <deliverable>portfolio-schema.json</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="1.2" priority="high" difficulty="easy">
      <title>Tạo folder structure cho Portfolio module</title>
      <description>Organize code structure</description>
      <subtasks>
        <subtask>Tạo folder components/Portfolio/</subtask>
        <subtask>Tạo folder hooks/usePortfolio</subtask>
        <subtask>Tạo folder services/cryptoAPI</subtask>
        <subtask>Setup routing cho portfolio page</subtask>
      </subtasks>
      <deliverable>Folder structure hoàn chỉnh</deliverable>
      <time>30 minutes</time>
    </task>

    <task id="1.3" priority="medium" difficulty="easy">
      <title>Install dependencies cần thiết</title>
      <description>Setup libraries</description>
      <subtasks>
        <subtask>npm install recharts (cho charts)</subtask>
        <subtask>npm install axios (cho API calls)</subtask>
        <subtask>npm install date-fns (cho date formatting)</subtask>
        <subtask>Kiểm tra compatibility với project hiện tại</subtask>
      </subtasks>
      <deliverable>package.json updated</deliverable>
      <time>15 minutes</time>
    </task>
  </phase>

  <!-- PHASE 2: CONTEXT & STATE MANAGEMENT -->
  <phase id="2" name="Context & State Management" duration="3-4 days">
    <task id="2.1" priority="high" difficulty="medium">
      <title>Tạo PortfolioContext</title>
      <description>Global state management cho portfolio</description>
      <subtasks>
        <subtask>Create PortfolioContext.jsx</subtask>
        <subtask>Define initial state (holdings, transactions, totalValue)</subtask>
        <subtask>Setup Context Provider</subtask>
        <subtask>Create actions (addCoin, removeCoin, updateAmount)</subtask>
      </subtasks>
      <code_example>
        <![CDATA[
        const PortfolioContext = createContext();
        const initialState = {
          holdings: [],
          transactions: [],
          totalValue: 0,
          profit: 0
        };
        ]]>
      </code_example>
      <deliverable>PortfolioContext.jsx</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="2.2" priority="high" difficulty="medium" status="in_progress">
      <title>Tạo Custom Hook: usePortfolio</title>
      <description>Hook để quản lý portfolio logic</description>
      <subtasks>
        <subtask>Create hooks/usePortfolio.js</subtask>
        <subtask>Implement addHolding function</subtask>
        <subtask>Implement removeHolding function</subtask>
        <subtask>Implement updateHolding function</subtask>
        <subtask>Calculate portfolio metrics (total value, profit/loss)</subtask>
      </subtasks>
      <deliverable>usePortfolio.js</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="2.3" priority="medium" difficulty="easy" status="in_progress">
      <title>Tạo Custom Hook: useLocalStorage</title>
      <description>Persist data to localStorage</description>
      <subtasks>
        <subtask>Create hooks/useLocalStorage.js</subtask>
        <subtask>Implement save to localStorage</subtask>
        <subtask>Implement load from localStorage</subtask>
        <subtask>Handle error cases</subtask>
      </subtasks>
      <deliverable>useLocalStorage.js</deliverable>
      <time>1-2 hours</time>
    </task>
  </phase>

  <!-- PHASE 3: API INTEGRATION -->
  <phase id="3" name="API Integration" duration="3-4 days">
    <task id="3.1" priority="high" difficulty="medium">
      <title>Setup CoinGecko API Service</title>
      <description>Tạo service layer cho API calls</description>
      <subtasks>
        <subtask>Create services/cryptoAPI.js</subtask>
        <subtask>Setup base URL và API key (nếu cần)</subtask>
        <subtask>Implement getCoinPrice function</subtask>
        <subtask>Implement getMultipleCoins function</subtask>
        <subtask>Implement getCoinHistory function</subtask>
        <subtask>Add error handling và retry logic</subtask>
      </subtasks>
      <api_endpoints>
        <endpoint>GET /api/v3/simple/price</endpoint>
        <endpoint>GET /api/v3/coins/markets</endpoint>
        <endpoint>GET /api/v3/coins/{id}/market_chart</endpoint>
      </api_endpoints>
      <deliverable>cryptoAPI.js</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="3.2" priority="high" difficulty="medium">
      <title>Tạo Custom Hook: useCryptoPrice</title>
      <description>Hook để fetch và update giá real-time</description>
      <subtasks>
        <subtask>Create hooks/useCryptoPrice.js</subtask>
        <subtask>Implement fetchPrices với useEffect</subtask>
        <subtask>Setup auto-refresh (mỗi 60s)</subtask>
        <subtask>Handle loading và error states</subtask>
        <subtask>Cache prices để reduce API calls</subtask>
      </subtasks>
      <deliverable>useCryptoPrice.js</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="3.3" priority="medium" difficulty="easy">
      <title>Tạo utility functions</title>
      <description>Helper functions cho formatting và calculations</description>
      <subtasks>
        <subtask>Create utils/formatters.js (formatCurrency, formatPercent)</subtask>
        <subtask>Create utils/calculations.js (calculateProfit, calculateAllocation)</subtask>
        <subtask>Add unit tests cho utilities</subtask>
      </subtasks>
      <deliverable>formatters.js, calculations.js</deliverable>
      <time>1-2 hours</time>
    </task>
  </phase>

  <!-- PHASE 4: UI COMPONENTS - DASHBOARD -->
  <phase id="4" name="Dashboard Components" duration="4-5 days">
    <task id="4.1" priority="high" difficulty="medium">
      <title>Tạo PortfolioSummary Component</title>
      <description>Component hiển thị tổng quan portfolio</description>
      <subtasks>
        <subtask>Create components/Portfolio/PortfolioSummary.jsx</subtask>
        <subtask>Display total balance</subtask>
        <subtask>Display 24h change (amount & percentage)</subtask>
        <subtask>Display total profit/loss</subtask>
        <subtask>Display top performer</subtask>
        <subtask>Add styling với Tailwind/CSS</subtask>
      </subtasks>
      <design_ref>Theo layout CoinGecko screenshot</design_ref>
      <deliverable>PortfolioSummary.jsx</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="4.2" priority="high" difficulty="hard">
      <title>Tạo HoldingsChart Component (Pie Chart)</title>
      <description>Biểu đồ tròn phân bổ danh mục</description>
      <subtasks>
        <subtask>Create components/Portfolio/HoldingsChart.jsx</subtask>
        <subtask>Setup Recharts PieChart</subtask>
        <subtask>Calculate allocation percentages</subtask>
        <subtask>Add colors cho từng coin</subtask>
        <subtask>Add legend và tooltips</subtask>
        <subtask>Make responsive</subtask>
      </subtasks>
      <library>Recharts</library>
      <deliverable>HoldingsChart.jsx</deliverable>
      <time>4-5 hours</time>
    </task>

    <task id="4.3" priority="high" difficulty="hard">
      <title>Tạo PerformanceChart Component (Line Chart)</title>
      <description>Biểu đồ hiệu suất theo thời gian</description>
      <subtasks>
        <subtask>Create components/Portfolio/PerformanceChart.jsx</subtask>
        <subtask>Setup Recharts LineChart</subtask>
        <subtask>Implement time range selector (24h, 7d, 1m, 3m, 1y)</subtask>
        <subtask>Fetch historical data từ API</subtask>
        <subtask>Calculate portfolio value over time</subtask>
        <subtask>Add gradient fill và styling</subtask>
      </subtasks>
      <deliverable>PerformanceChart.jsx</deliverable>
      <time>5-6 hours</time>
    </task>

    <task id="4.4" priority="medium" difficulty="easy">
      <title>Tạo Dashboard Layout</title>
      <description>Main dashboard container</description>
      <subtasks>
        <subtask>Create components/Portfolio/Dashboard.jsx</subtask>
        <subtask>Arrange PortfolioSummary, Charts</subtask>
        <subtask>Add responsive grid layout</subtask>
        <subtask>Add loading states</subtask>
      </subtasks>
      <deliverable>Dashboard.jsx</deliverable>
      <time>2 hours</time>
    </task>
  </phase>

  <!-- PHASE 5: UI COMPONENTS - HOLDINGS MANAGEMENT -->
  <phase id="5" name="Holdings Management" duration="4-5 days">
    <task id="5.1" priority="high" difficulty="medium">
      <title>Tạo HoldingsList Component</title>
      <description>Danh sách holdings trong table</description>
      <subtasks>
        <subtask>Create components/Portfolio/HoldingsList.jsx</subtask>
        <subtask>Display table headers (Coin, Price, 1h, 24h, 7d, Holdings, PNL)</subtask>
        <subtask>Map holdings data</subtask>
        <subtask>Add sorting functionality</subtask>
        <subtask>Add responsive design cho mobile</subtask>
      </subtasks>
      <deliverable>HoldingsList.jsx</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="5.2" priority="high" difficulty="medium">
      <title>Tạo HoldingItem Component</title>
      <description>Row item cho mỗi coin trong table</description>
      <subtasks>
        <subtask>Create components/Portfolio/HoldingItem.jsx</subtask>
        <subtask>Display coin logo, name, symbol</subtask>
        <subtask>Display current price & changes</subtask>
        <subtask>Display holdings amount</subtask>
        <subtask>Display PNL (profit/loss)</subtask>
        <subtask>Add edit và delete buttons</subtask>
        <subtask>Color code profits (green) và losses (red)</subtask>
      </subtasks>
      <deliverable>HoldingItem.jsx</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="5.3" priority="high" difficulty="hard">
      <title>Tạo AddCoinModal Component</title>
      <description>Modal để thêm coin mới</description>
      <subtasks>
        <subtask>Create components/Portfolio/AddCoinModal.jsx</subtask>
        <subtask>Setup modal overlay và backdrop</subtask>
        <subtask>Create form (coin search, amount, buy price, date)</subtask>
        <subtask>Implement coin search với autocomplete</subtask>
        <subtask>Add form validation</subtask>
        <subtask>Handle form submission</subtask>
        <subtask>Add animation cho modal open/close</subtask>
      </subtasks>
      <deliverable>AddCoinModal.jsx</deliverable>
      <time>4-5 hours</time>
    </task>

    <task id="5.4" priority="medium" difficulty="medium">
      <title>Tạo EditCoinModal Component</title>
      <description>Modal để edit holding hiện tại</description>
      <subtasks>
        <subtask>Create components/Portfolio/EditCoinModal.jsx</subtask>
        <subtask>Pre-fill form với data hiện tại</subtask>
        <subtask>Allow update amount, buy price</subtask>
        <subtask>Add confirmation dialog</subtask>
      </subtasks>
      <deliverable>EditCoinModal.jsx</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="5.5" priority="medium" difficulty="easy">
      <title>Tạo DeleteConfirmation Component</title>
      <description>Confirm dialog khi xóa coin</description>
      <subtasks>
        <subtask>Create components/Portfolio/DeleteConfirmation.jsx</subtask>
        <subtask>Add warning message</subtask>
        <subtask>Add cancel và confirm buttons</subtask>
      </subtasks>
      <deliverable>DeleteConfirmation.jsx</deliverable>
      <time>1 hour</time>
    </task>
  </phase>

  <!-- PHASE 6: INTEGRATION WITH SAVING APP -->
  <phase id="6" name="Integration" duration="2-3 days">
    <task id="6.1" priority="high" difficulty="medium">
      <title>Tích hợp Portfolio vào Main Navigation</title>
      <description>Add portfolio link vào navigation</description>
      <subtasks>
        <subtask>Update navigation menu</subtask>
        <subtask>Add Portfolio icon</subtask>
        <subtask>Setup routing /portfolio</subtask>
      </subtasks>
      <deliverable>Updated Navigation</deliverable>
      <time>1 hour</time>
    </task>

    <task id="6.2" priority="high" difficulty="medium">
      <title>Kết nối Portfolio với Saving Dashboard</title>
      <description>Show portfolio value trong tổng tài sản</description>
      <subtasks>
        <subtask>Update Saving dashboard để include crypto portfolio</subtask>
        <subtask>Calculate total net worth (savings + crypto)</subtask>
        <subtask>Add toggle để show/hide crypto holdings</subtask>
      </subtasks>
      <deliverable>Updated Dashboard</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="6.3" priority="medium" difficulty="easy">
      <title>Share Context giữa Saving và Portfolio</title>
      <description>Integrate contexts nếu cần</description>
      <subtasks>
        <subtask>Combine contexts hoặc create AppContext</subtask>
        <subtask>Share user currency settings</subtask>
        <subtask>Share theme settings</subtask>
      </subtasks>
      <deliverable>Shared context</deliverable>
      <time>1-2 hours</time>
    </task>
  </phase>

  <!-- PHASE 7: ADDITIONAL FEATURES -->
  <phase id="7" name="Additional Features" duration="3-4 days">
    <task id="7.1" priority="medium" difficulty="medium" status="in_progress">
      <title>Transaction History</title>
      <description>Lịch sử mua bán coin</description>
      <subtasks>
        <subtask>Create TransactionHistory.jsx component</subtask>
        <subtask>Display buy/sell transactions</subtask>
        <subtask>Add filter by coin, date</subtask>
        <subtask>Add export to CSV function</subtask>
      </subtasks>
      <deliverable>TransactionHistory.jsx</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="7.2" priority="low" difficulty="medium">
      <title>Alerts & Notifications</title>
      <description>Price alerts khi coin đạt target</description>
      <subtasks>
        <subtask>Create AlertSettings.jsx component</subtask>
        <subtask>Setup price alert thresholds</subtask>
        <subtask>Add browser notifications</subtask>
        <subtask>Store alerts in localStorage</subtask>
      </subtasks>
      <deliverable>AlertSettings.jsx</deliverable>
      <time>4-5 hours</time>
    </task>

    <task id="7.3" priority="low" difficulty="easy">
      <title>Watchlist Feature</title>
      <description>Theo dõi coin chưa mua</description>
      <subtasks>
        <subtask>Create Watchlist.jsx component</subtask>
        <subtask>Add/remove coins to watchlist</subtask>
        <subtask>Display price và changes</subtask>
        <subtask>Quick add to portfolio button</subtask>
      </subtasks>
      <deliverable>Watchlist.jsx</deliverable>
      <time>2-3 hours</time>
    </task>
  </phase>

  <!-- PHASE 8: TESTING & OPTIMIZATION -->
  <phase id="8" name="Testing & Optimization" duration="3-4 days">
    <task id="8.1" priority="high" difficulty="medium">
      <title>Unit Testing</title>
      <description>Viết tests cho components và functions</description>
      <subtasks>
        <subtask>Test utility functions</subtask>
        <subtask>Test custom hooks</subtask>
        <subtask>Test API service</subtask>
        <subtask>Setup Jest và React Testing Library</subtask>
      </subtasks>
      <deliverable>Test files</deliverable>
      <time>4-6 hours</time>
    </task>

    <task id="8.2" priority="high" difficulty="medium">
      <title>Performance Optimization</title>
      <description>Optimize app performance</description>
      <subtasks>
        <subtask>Implement React.memo cho components</subtask>
        <subtask>Use useMemo và useCallback</subtask>
        <subtask>Lazy load charts</subtask>
        <subtask>Optimize API calls (debounce, cache)</subtask>
        <subtask>Code splitting</subtask>
      </subtasks>
      <deliverable>Optimized code</deliverable>
      <time>3-4 hours</time>
    </task>

    <task id="8.3" priority="medium" difficulty="easy">
      <title>Error Handling & Edge Cases</title>
      <description>Handle errors gracefully</description>
      <subtasks>
        <subtask>Add error boundaries</subtask>
        <subtask>Handle API failures</subtask>
        <subtask>Handle empty states</subtask>
        <subtask>Add retry mechanisms</subtask>
      </subtasks>
      <deliverable>Error handling implementation</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="8.4" priority="medium" difficulty="easy">
      <title>Responsive Design Testing</title>
      <description>Test trên nhiều devices</description>
      <subtasks>
        <subtask>Test trên mobile (320px - 768px)</subtask>
        <subtask>Test trên tablet (768px - 1024px)</subtask>
        <subtask>Test trên desktop (1024px+)</subtask>
        <subtask>Fix layout issues</subtask>
      </subtasks>
      <deliverable>Responsive fixes</deliverable>
      <time>2-3 hours</time>
    </task>
  </phase>

  <!-- PHASE 9: DEPLOYMENT & DOCUMENTATION -->
  <phase id="9" name="Deployment & Documentation" duration="2-3 days">
    <task id="9.1" priority="high" difficulty="easy">
      <title>Write Documentation</title>
      <description>Technical và user documentation</description>
      <subtasks>
        <subtask>README.md with setup instructions</subtask>
        <subtask>API documentation</subtask>
        <subtask>Component documentation</subtask>
        <subtask>User guide</subtask>
      </subtasks>
      <deliverable>Complete documentation</deliverable>
      <time>2-3 hours</time>
    </task>

    <task id="9.2" priority="high" difficulty="easy">
      <title>Environment Setup cho Production</title>
      <description>Prepare for deployment</description>
      <subtasks>
        <subtask>Setup environment variables</subtask>
        <subtask>Configure build scripts</subtask>
        <subtask>Setup CI/CD nếu cần</subtask>
      </subtasks>
      <deliverable>Production config</deliverable>
      <time>1-2 hours</time>
    </task>

    <task id="9.3" priority="high" difficulty="easy">
      <title>Deploy to Vercel/Netlify</title>
      <description>Deploy application</description>
      <subtasks>
        <subtask>Build production version</subtask>
        <subtask>Deploy to hosting platform</subtask>
        <subtask>Setup custom domain nếu có</subtask>
        <subtask>Test production deployment</subtask>
      </subtasks>
      <deliverable>Live application</deliverable>
      <time>1-2 hours</time>
    </task>

    <task id="9.4" priority="medium" difficulty="easy">
      <title>Post-Deployment Monitoring</title>
      <description>Monitor app performance</description>
      <subtasks>
        <subtask>Setup error tracking (Sentry)</subtask>
        <subtask>Setup analytics (Google Analytics)</subtask>
        <subtask>Monitor API usage</subtask>
        <subtask>Collect user feedback</subtask>
      </subtasks>
      <deliverable>Monitoring setup</deliverable>
      <time>1-2 hours</time>
    </task>
  </phase>

  <!-- LEARNING OBJECTIVES -->
  <learning_objectives>
    <objective>Master React Hooks (useState, useEffect, useContext, custom hooks)</objective>
    <objective>Understand Context API for state management</objective>
    <objective>Learn API integration và async operations</objective>
    <objective>Practice component composition và reusability</objective>
    <objective>Work with chart libraries (Recharts)</objective>
    <objective>Implement CRUD operations</objective>
    <objective>Handle forms và validation</objective>
    <objective>Optimize React performance</objective>
    <objective>Deploy React applications</objective>
  </learning_objectives>

  <!-- TIPS FOR SUCCESS -->
  <tips>
    <tip>Commit code thường xuyên sau mỗi task hoàn thành</tip>
    <tip>Test từng component riêng lẻ trước khi integrate</tip>
    <tip>Sử dụng React DevTools để debug</tip>
    <tip>Document code khi viết, đừng để sau</tip>
    <tip>Tham khảo CoinGecko API docs kỹ để tránh rate limits</tip>
    <tip>Start simple, sau đó refactor để improve</tip>
    <tip>Đừng ngại ask for help khi stuck</tip>
    <tip>Celebrate small wins! 🎉</tip>
  </tips>

  <!-- RESOURCES -->
  <resources>
    <resource type="api">
      <name>CoinGecko API</name>
      <url>https://www.coingecko.com/api/documentation</url>
    </resource>
    <resource type="library">
      <name>Recharts Documentation</name>
      <url>https://recharts.org/</url>
    </resource>
    <resource type="tutorial">
      <name>React Context API Guide</name>
      <url>https://react.dev/reference/react/useContext</url>
    </resource>
    <resource type="design">
      <name>CoinGecko Design Reference</name>
      <url>https://www.coingecko.com/</url>
    </resource>
  </resources>
</project>